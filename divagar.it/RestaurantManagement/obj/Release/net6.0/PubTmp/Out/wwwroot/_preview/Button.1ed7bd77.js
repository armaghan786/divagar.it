import{d as Ct,r as p,c as Ne,o as Nt,a as P,b as w,f as E,n as Ye,e as R,i as T,t as q,m as ue,l as ce,w as Qe,v as et,Q as Mt,h as tt,F as At,q as ae,s as re,A as te,x as Dt,j as Ut}from"./entry.228c6c4b.js";import{u as Vt,b as Ft,m as Me,c as $t,f as Bt,h as Wt,w as at,T as G,U as de,V as me,W as ve,a4 as Pe,a5 as zt,a6 as Ht}from"./constants.1fe5060f.js";import{b as k,E as pe,c as Jt}from"./index.aac7493c.js";import{t as jt,f as qt}from"./funnel_event_helper.16dc196b.js";import{F as rt}from"./FunnelServices.b8565427.js";import{h as Gt,f as Kt,g as Zt,a as Xt,c as Yt}from"./orderform_helpers.2892da4e.js";import{u as Qt}from"./useRedirectAction.5a813b1e.js";import{p as ea}from"./payment-warning.96dc5690.js";import{P as C,C as nt,s as Ae,S as ta,N as ot,A as st}from"./HLConst.e2b392c3.js";import{_ as aa}from"./MoonLoader.vue.0fb55031.js";import"./HLImage.vue.1a18c02e.js";import"./client-only.5b85de2b.js";import"./HtmlPreview.vue.b59a146a.js";import"./utils.1349f819.js";import"./index.50b8e88a.js";import"./am_helper.326d5481.js";import"./currency_helper.0e2fcc1c.js";var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});function Se(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Se=function(a){return typeof a}:Se=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Se(n)}var ut="https://js.stripe.com/v3",ra=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,lt="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",na=function(){for(var a=document.querySelectorAll('script[src^="'.concat(ut,'"]')),r=0;r<a.length;r++){var f=a[r];if(ra.test(f.src))return f}return null},oa=function(a){var r=a&&!a.advancedFraudSignals?"?advancedFraudSignals=false":"",f=document.createElement("script");f.src="".concat(ut).concat(r);var h=document.head||document.body;if(!h)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return h.appendChild(f),f},sa=function(a,r){!a||!a._registerWrapper||a._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:r})},be=null,la=function(a){return be!==null||(be=new Promise(function(r,f){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&a&&console.warn(lt),window.Stripe){r(window.Stripe);return}try{var h=na();h&&a?console.warn(lt):h||(h=oa(a)),h.addEventListener("load",function(){window.Stripe?r(window.Stripe):f(new Error("Stripe.js not available"))}),h.addEventListener("error",function(){f(new Error("Failed to load Stripe.js"))})}catch(D){f(D);return}})),be},ia=function(a,r,f){if(a===null)return null;var h=a.apply(void 0,r);return sa(h,f),h},it=function(a){var r=`invalid load parameters; expected object of shape

    {advancedFraudSignals: boolean}

but received

    `.concat(JSON.stringify(a),`
`);if(a===null||Se(a)!=="object")throw new Error(r);if(Object.keys(a).length===1&&typeof a.advancedFraudSignals=="boolean")return a;throw new Error(r)},Ie,De=!1,ct=function(){for(var a=arguments.length,r=new Array(a),f=0;f<a;f++)r[f]=arguments[f];De=!0;var h=Date.now();return la(Ie).then(function(D){return ia(D,r,h)})};ct.setLoadParameters=function(n){if(De&&Ie){var a=it(n),r=Object.keys(a),f=r.reduce(function(h,D){var K;return h&&n[D]===((K=Ie)===null||K===void 0?void 0:K[D])},!0);if(f)return}if(De)throw new Error("You cannot change load parameters after calling loadStripe");Ie=it(n)};Ue.loadStripe=ct;var ua=Ue;const ca=ae(()=>re(()=>import("./Recaptcha.1066cf8e.js"),[],import.meta.url).then(n=>n.default||n)),da=ae(()=>re(()=>import("./PaymentElementComponent.8f7c0c86.js"),["./ghl-payment-element.29b93162.css","./PaymentElementComponent.3a186e73.css"],import.meta.url).then(n=>n.default||n)),ma=ae(()=>re(()=>import("./NewPaypalSmartBtnSubscription.1cae8295.js"),["./PaymentElementComponent.3a186e73.css"],import.meta.url).then(n=>n.default||n)),va=ae(()=>re(()=>import("./NewPaypalSmartBtnOrder.3711a7e0.js"),["./PaymentElementComponent.3a186e73.css"],import.meta.url).then(n=>n.default||n)),pa=ae(()=>re(()=>import("./NewPaypalSmartBtnBNPL.2f47be24.js"),["./PaymentElementComponent.3a186e73.css"],import.meta.url).then(n=>n.default||n)),ya=ae(()=>re(()=>import("./PaymentElementModal.4951bc12.js"),["./ghl-payment-element.29b93162.css","./PaymentElementModal.15636bd6.css"],import.meta.url).then(n=>n.default||n)),fa=["id","href","target","data-animation-class","aria-label"],_a={key:0,style:{"margin-right":"5px"},class:"button-icon-start"},ga={class:"main-heading-button"},ha={key:1,style:{"margin-left":"5px"},class:"button-icon-end"},Pa={class:"sub-heading-button"},ba={key:1,class:"recaptcha-container button-recaptcha-container"},Sa={key:0},Ia=["disabled","data-animation-class","id","aria-label"],wa={key:0,class:"button-icon-start"},Ea={class:"main-heading-button"},Oa={key:1,class:"button-icon-end"},Ta={class:"sub-heading-button"},ka={class:"btn-loader-position",style:{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)"}},xa={key:0},La=["id"],Ra={key:0,class:"card-el-error-msg"},Ca=["src"],Na={key:3,style:{width:"70%",margin:"8px auto"},class:"paypal-content"},Ma={key:1},Aa={key:4,class:"card-el-error-msg error-message",style:{"justify-content":"center"}},Da={inheritAttrs:!1},er=Ct({...Da,__name:"Button",props:{element:{type:Object,required:!0},classStyles:{type:Array,required:!0}},setup(n){var Je,je,qe,Ge,Ke,Ze,Xe;const a=n,r=Vt(),{openPopup:f}=Jt(),h=Ft(a.element),{call:D,createMembershipToken:K,mailTo:dt,sms:mt,goToNextFunnelStep:ne,openUrl:we,getNextFunnelStepURL:vt,goToStep:pt}=Qt(),yt=Ut(),{$bus:Ve}=yt;let Z=(je=(Je=a.element.extra)==null?void 0:Je.text)==null?void 0:je.value;Z=Me(Z);let X=(Ge=(qe=a.element.extra)==null?void 0:qe.subText)==null?void 0:Ge.value;X=Me(X);const ft=r.value.funnelId,_t=r.value.stepId,gt=r.value.funnelPageId,_=r.value.locationId,L=(Xe=(Ze=(Ke=a.element.extra)==null?void 0:Ke.productId)==null?void 0:Ze.value)==null?void 0:Xe.id,g=p(!1),ye=p(!1),Ee=p(""),Fe=p(""),U=p(),Oe=p(!1),Te=p(""),V=p(""),z=p(""),b=p(!1),ht=Ne(()=>{var e;return((e=U.value)==null?void 0:e.price.type)==="recurring"}),v=p(),S=p(""),oe=p(!1),F=p(),se=p(""),$e=p(!1),N=p(!0),H=p(),Be=p(),Y=p({mode:"payment",amount:0,currency:"",contact:{id:"",full_name:"",email:"",phone:""}}),fe=p();p(!1);const $=p({mode:"payment",amount:0,currency:"usd",enableBNPL:!0}),ke=p(!1),{action:{value:J},visitWebsite:{value:_e}}=a.element.extra,B=Ne(()=>{var e;return((e=r.value.paymentProviderDetails)==null?void 0:e.provider)===C.CUSTOM_PROVIDER&&!!r.value.customProviderPublishableKey&&J===k.SELL_PRODUCT}),Pt=async e=>{e.type==="ready"?(N.value=!1,H.value="",g.value=!1):e.type==="processing"?(b.value=!0,H.value=""):e.type==="error"?(e.message==="Request failed with status code 429"?(F.value=void 0,oe.value=!0):H.value=e.message,b.value=!1,N.value=!1):e.type==="success"&&(H.value="",b.value=!1,await bt(e))},bt=async e=>{try{let t=localStorage.getItem("_ud");t&&(t=JSON.parse(t));const{paymentResponseData:i}=await Gt(t,e.data,e.provider,_);await le(i)}catch(t){H.value=t}finally{sessionStorage.removeItem("orderResponse"),sessionStorage.removeItem("contactResponse")}},We=()=>{const e=(Z??"")+" "+(X??"");if(Z||X)return e;if(J===k.GO_TO_URL){const{visitWebsite:{value:t}}=a.element.extra;return t==null?void 0:t.url}return e},St=e=>{if(!e){se.value="Verification failed! Please try again";return}se.value="",F.value=e},ze=[k.CLICK_TO_CALL,k.CLICK_TO_SMS,k.GO_TO_URL,k.GO_TO_STEP];ze.includes(J)&&(ye.value=!0,$t(_e==null?void 0:_e.url)||(Ee.value=He())),Nt(()=>{ze.includes(J)&&(ye.value=!0,Ee.value=He()),r.value.orderFormVersion===2&&L&&J===k.SELL_PRODUCT&&(It(),fe.value=JSON.parse(localStorage.getItem("_ud")||"{}").country)});async function It(){var e,t,i,u,c,s,o;try{const d=await rt.findProductById({productId:L});U.value={...d,qty:1,amount:d.price.amount},V.value=(e=d==null?void 0:d.price)==null?void 0:e.currency,Y.value.amount=U.value.amount,Y.value.currency=V.value,Y.value.mode=((t=U.value)==null?void 0:t.price.type)==="recurring"?"subscription":"payment",Y.value.productDetails=[{productId:(i=d==null?void 0:d.product)==null?void 0:i._id,priceId:(u=d==null?void 0:d.price)==null?void 0:u._id}],$.value.amount=U.value.amount,$.value.currency=V.value.toLowerCase(),$.value.mode=((c=U.value)==null?void 0:c.price.type)==="recurring"?"subscription":"payment";let l=localStorage.getItem("_ud");l&&(l=JSON.parse(l),Y.value.contact={id:l==null?void 0:l.id,full_name:l==null?void 0:l.full_name,email:l==null?void 0:l.email,phone:l==null?void 0:l.phone}),setTimeout(()=>{$e.value=!0},1e3)}catch(d){const l=((o=(s=d==null?void 0:d.response)==null?void 0:s.data)==null?void 0:o.message)||(d==null?void 0:d.message)||"Not able to fetch products!";console.error(l),alert("Not able to fetch products!")}}async function wt(){var t,i,u,c,s,o,d,l,I,M,j,x;const{action:e}=a.element.extra;switch(e.value){case"openPopup":{jt(r.value.stepId),f();break}case"url":{const{visitWebsite:m}=a.element.extra;we(m.value);break}case"hide-element":{const{hideElements:m}=a.element.extra;Wt(m.value);break}case"show-element":{const{showElements:m}=a.element.extra;Bt(m.value);break}case"scroll-to-element":{const{scrollToElement:m}=a.element.extra;Ve.$emit("scroll-to-element",m.value);break}case"go-to-next-funnel-step":{g.value=!0,ne();break}case k.GO_TO_STEP:{g.value=!0,ne(a.element.extra.stepPath.value);break}case"sell-product":{if(g.value)return;g.value=!0;const m=`_pl_${r.value.funnelId}`,O=localStorage.getItem(m);let y;if(O&&(y=JSON.parse(O)),r.value.orderFormVersion===2){if(te("provider").value===C.CUSTOM_PROVIDER&&(y!=null&&y.manualPaymentMethodId)){xe(nt,y==null?void 0:y.manualPaymentMethodId);return}if(te("provider").value==="pp")Oe.value=!0;else{if((((i=(t=r.value)==null?void 0:t.paymentProviderDetails)==null?void 0:i.provider)===C.AUTHORIZE_NET||((c=(u=r.value)==null?void 0:u.paymentProviderDetails)==null?void 0:c.provider)===C.WHITE_LABEL&&((o=(s=r.value)==null?void 0:s.paymentProviderDetails)==null?void 0:o.whiteLabelProvider)===C.AUTHORIZE_NET)&&r.value.merchantLoginId){xe(st);return}else if((((l=(d=r.value)==null?void 0:d.paymentProviderDetails)==null?void 0:l.provider)===C.NMI||((M=(I=r.value)==null?void 0:I.paymentProviderDetails)==null?void 0:M.provider)===C.WHITE_LABEL&&((x=(j=r.value)==null?void 0:j.paymentProviderDetails)==null?void 0:x.whiteLabelProvider)===C.NMI)&&r.value.nmiMerchantGatewayId){xe(ot);return}else if(B.value){await xt(C.CUSTOM_PROVIDER);return}const W=r.value.stripePublishableKey,Q=r.value.stripeAccountId,ie=r.value.stripePublishableKey;if(W&&ie)Te.value=await ua.loadStripe(W,{stripeAccount:Q||void 0});else{alert("Stripe account not found!");return}Et()}}else Ot();break}case"click-to-call":{const m=a.element.extra;D(m[pe.PHONE_NUMBER].value);break}case"click-to-sms":{const m=a.element.extra;mt(m[pe.PHONE_NUMBER].value);break}case"click-to-mail":{const m=a.element.extra;dt(m[pe.EMAIL_ADDRESS].value);break}case k.GO_TO_MEMBERSHIP:{try{let m;const O=r.value.locationId,{ct:y,previewUrl:A}=te(`_mf_${O}`).value;location.hostname==="localhost"?m=`http://localhost:4040/library/?domain=${A}&token=${y}&location_id=${O}`:m=`${A}/library?&token=${y}&location_id=${O}`,we({url:m,newTab:!1})}catch{alert("Sorry something went wrong.")}break}default:console.error(`Invalid action type received: ${e.value}`)}}function le(e){var t,i,u,c,s,o,d;try{const l=e==null?void 0:e.membershipPurchase;l!=null&&l.length&&K(_,l[0].token);const I=e==null?void 0:e.membershipToken;I&&K(_,I),Dt(()=>{qt("track","Upsell")});const{saleAction:M,stepPath:j,visitWebsite:x}=a.element.extra;if(!M)if(r.value.funnelNextStep){ne();return}else throw new Error("Redirect not handled");if(r.value.orderFormVersion===2){const m=`_pl_${r.value.funnelId}`,O=localStorage.getItem(m);if(O){let y=JSON.parse(O);y.products.push(U.value),y.total+=(i=(t=v.value)==null?void 0:t.order)==null?void 0:i.amount,y.tax=(s=(c=(u=v.value)==null?void 0:u.order)==null?void 0:c.taxSummary)==null?void 0:s.map(A=>{var Q;const W=(Q=y==null?void 0:y.tax)==null?void 0:Q.find(ie=>ie._id===A._id);return W?{...W,amount:W.amount+A.amount}:A}),at(m,JSON.stringify(y))}}else{const m=`_pl_v1_${r.value.funnelId}`,O=localStorage.getItem(m);if(O){let y=JSON.parse(O);y.push((d=(o=a==null?void 0:a.element.extra)==null?void 0:o.productId)==null?void 0:d.value),at(m,JSON.stringify(y))}}switch(M.value){case"url":if(x&&x.value&&x.value.url){we(x.value);break}else throw new Error("Redirect not handled");case"step-path":if(j&&j.value){ne(j.value);break}else throw new Error("Redirect not handled");default:if(r.value.funnelNextStep){ne();break}else throw new Error("Redirect not handled")}}catch{{const I=JSON.parse(localStorage.getItem("_ud")||"{}"),M=Ae.includes(localStorage.getItem(`pmt_${r.value.funnelId}_${I==null?void 0:I.id}`)||"")?"We are proccessing your order with the bank. We'll confirm you order after bank's confirmation.":`Order successfully placed! 
 However, Something went wrong while displaying this webpage, please contact the seller.`;alert(M)}g.value=!1;return}}const ge=async()=>{var u,c;r.value.countryList.length===0&&await Zt();const e=Ne(()=>{var s;return((s=Xt(fe==null?void 0:fe.value))==null?void 0:s.states.map(o=>({iso:o.code,name:o.name})))??[]});let t=localStorage.getItem("_ud");t&&(t=JSON.parse(t),sessionStorage.setItem("contactResponse",JSON.stringify(t)));const i=t==null?void 0:t.customer_id;if(!i){S.value="Contact not found!";return}if(oe.value&&!F.value){se.value="Invalid Captcha!",b.value=!1,g.value=!1;return}if(v.value=await Yt({contactId:i,domain:r.value.domain,pageUrl:r.value.pageUrl,locationId:_,productPreviewList:[{_id:L,qty:1}],store:r.value,subType:Ht.UPSELL,traceId:t==null?void 0:t.traceId,reCaptchaToken:F.value,toZip:t.postal_code,toState:((u=e.value.find(s=>s.name===t.state))==null?void 0:u.iso)??"",toCountry:t.country}),F.value=void 0,(c=v.value)!=null&&c.error){v.value.status===429&&(oe.value=!0),S.value=v.value.message??"Error creating order!",b.value=!1,g.value=!1;return}sessionStorage.setItem("orderResponse",JSON.stringify(v.value))};async function Et(){var e,t,i,u,c,s,o,d;try{if(!L)throw new Error("No product Id found for initiating stripe payment");if(S.value="",await ge(),$.value.amount=(t=(e=v.value)==null?void 0:e.order)==null?void 0:t.amount,$.value.currency=V.value.toLowerCase(),$.value.mode=((i=U.value)==null?void 0:i.price.type)==="recurring"?"subscription":"payment",(c=(u=v.value)==null?void 0:u.order)!=null&&c.amount||($.value.mode="setup"),!v.value||(s=v.value)!=null&&s.error)return;let l={};l={altId:_,altType:"location",orderId:v.value.order._id,reCaptchaToken:F.value};const I=JSON.parse(localStorage.getItem("_ud")||"{}");Ae.includes(localStorage.getItem(`pmt_${r.value.funnelId}_${I==null?void 0:I.id}`)||"")&&(l.paymentMethodTypes=[ta.sepa]);const M=await Kt(_,(o=v.value.order)==null?void 0:o.contactId);if(!!["klarna","affirm","afterpay_clearpay"].includes(M)){ke.value=!0;return}const x=await G.initiateStripePayment(l);if(!x.success){S.value=x.message||"We're sorry, but something went wrong. Please try again.";return}const{clientSecret:m,paymentMethodId:O}=x;if(m){let ee={};if(Ae.includes(localStorage.getItem(`pmt_${r.value.funnelId}_${I==null?void 0:I.id}`)||"")?ee=await Te.value.confirmSepaDebitPayment(m,{payment_method:O}):ee=await Te.value.confirmCardPayment(m,{payment_method:O,setup_future_usage:"off_session"}),ee.error){console.error("Failed to confirm card payment!",ee.error),ee.error.message&&alert(ee.error.message);return}}const{orderId:y,paymentIntentId:A,subscriptionId:W,invoiceId:Q,subId:ie,txnId:Lt}=x,Rt={altId:_,altType:"location",orderId:y,paymentIntentId:A,subscriptionId:W,invoiceId:Q,isAuth:!1,subId:ie,txnId:Lt,attribution:{eventData:de(),sessionId:me(_),sessionFingerprint:ve(_)}},he=await G.verifyStripePayment(Rt);if(console.log("verifyPaymentResponseData",he),!he.success){S.value=he.message||"We're sorry, but something went wrong. Please try again.";return}await le(he)}catch(l){if(((d=l==null?void 0:l.response)==null?void 0:d.status)===429){oe.value=!0,b.value=!1,g.value=!1;return}S.value=Pe(l),g.value=!1,console.error(l)}}async function xe(e,t){var i,u,c;try{if(!L)throw new Error("No product Id found for initiating stripe payment");if(b.value=!0,S.value="",await ge(),!v.value||(i=v.value)!=null&&i.error)return;let s;if((u=v.value)!=null&&u.order._id){s={altId:_,altType:"location",orderId:(c=v.value)==null?void 0:c.order._id,attribution:{eventData:de(),sessionId:me(_),sessionFingerprint:ve(_)}};let o;switch(e){case st:{o=await G.authorizeNetOrderPayment(s);break}case ot:{o=await G.nmiOrderPayment(s);break}case nt:{t&&(s.manualPaymentMethodId=t),o=await G.customProviderOrderPayment(s);break}default:console.log("Invalid payment provider");break}if(console.log(o),b.value=!1,!o.success){S.value=o.message||"We're sorry, but something went wrong. Please try again.";return}await le({membershipPurchase:o.membershipPurchase,membershipToken:o.membershipToken})}}catch(s){g.value=!1,b.value=!1,console.log(s),S.value=Pe(s)}}async function Ot(){if(L)try{const e=zt(),t={...de(),fbEventId:e},i=me(_),u=ve(_),c=await rt.funnelPayment({fingerprint:te("msgsndr_id").value,productList:[L],locationId:_,funnelId:ft,stepId:_t,pageId:gt,domain:r.value.domain,pageUrl:r.value.pageUrl,source:"payment_button",submissionType:3,eventData:t,sessionId:i,sessionFingerprint:u,_mp:te("_mp").value});await le(c)}catch(e){console.log(e)}finally{g.value=!0}}async function Le(e,t){var i,u;try{if(!L)throw new Error("No product Id found for initiating paypal payment");if(b.value=!0,z.value="",S.value="",await ge(),!v.value||(i=v.value)!=null&&i.error)return;const c={altId:_,altType:"location",orderId:(u=v.value)==null?void 0:u.order._id},s=await G.initiatePayPalPayment(c);if(!s.success){S.value=s.message||"We're sorry, but something went wrong. Please try again.";return}if(t.subscription&&s.plan_id)return t.subscription.create(s);if(t.order&&s.id)return s.id}catch(c){console.log(c.message),z.value=Pe(c),b.value=!1}}async function Re(e){try{if(!L)throw new Error("No product Id found for paypal payment");b.value=!0,z.value="",S.value="";const t={facilitatorAccessToken:e.facilitatorAccessToken,orderId:v.value.order._id,paypalOrderId:e.orderID,altId:_,altType:"location",attribution:{eventData:de(),sessionId:me(_),sessionFingerprint:ve(_)}};e.payerID&&(t.paypalPayerId=e.payerID),e.subscriptionID&&(t.paypalSubscriptionId=e.subscriptionID);const i=await G.verifyPayPalPayment(t);if(console.log("verifyPaymentResponseData",i),!i.success){S.value=i.message||"We're sorry, but something went wrong. Please try again.";return}const u=te("provider");u.value="pp",await le(i)}catch(t){console.error(t.message),z.value=Pe(t),b.value=!1}}function Ce(){b.value=!1,z.value="Transaction has been cancelled by the user!"}function He(){var t,i,u,c,s;let e="";switch(J){case k.CLICK_TO_CALL:{let o=(t=a.element.extra[pe.PHONE_NUMBER])==null?void 0:t.value;o=o==null?void 0:o.replace("tel:",""),e=`tel:${o}`;break}case k.CLICK_TO_SMS:{let o=(i=a.element.extra[pe.PHONE_NUMBER])==null?void 0:i.value;o=o==null?void 0:o.replace("sms:",""),e=`sms:${o}`;break}case k.GO_TO_URL:{const{url:o,newTab:d}=_e;e=o,e=Me(e),e&&!e.startsWith("#")&&!/^https?:/.test(e)&&(e=`https://${e}`),Fe.value=d?"_blank":"";break}case k.GO_TO_STEP:{const o=(s=(c=(u=a.element)==null?void 0:u.extra)==null?void 0:c.stepPath)==null?void 0:s.value;e=vt(o,!1);break}}return e}async function Tt(e){if(r.value.videoExistsInPage&&Ve.$emit("handle-redirect"),J===k.GO_TO_STEP){const t=a.element.extra.stepPath.value;pt(e,t)}}function kt(){ke.value=!1,g.value=!1,N.value=!1}async function xt(e){var i,u,c,s,o;if(!L)throw new Error("No product Id found for initiating stripe payment");if(S.value="",await ge(),!((u=(i=v.value)==null?void 0:i.order)!=null&&u._id&&e===C.CUSTOM_PROVIDER))return;const t={source:"order",sourceId:(s=(c=v==null?void 0:v.value)==null?void 0:c.order)==null?void 0:s._id,sourceDetails:v.value.order,traceId:v.value.traceId,extra:{attribution:{eventData:de(),sessionId:me(_),sessionFingerprint:ve(_)}},captchaToken:F.value};(o=Be.value)==null||o.confirmPayment(t)}return(e,t)=>{const i=ca,u=da,c=ma,s=va,o=pa,d=ya;return P(),w(At,null,[ye.value?(P(),w("a",{key:0,id:`${n.element.id}_btn`,href:Ee.value,target:Fe.value,"data-animation-class":E(h),class:Ye([n.classStyles,"text-center"]),onClick:t[0]||(t[0]=l=>Tt(l)),"aria-label":We()},[R("span",{style:ue(g.value?"visibility: hidden;":""),class:"main-heading-group"},[n.element.extra.icon!==""?(P(),w("span",_a)):T("",!0),R("span",ga,q(E(Z)),1),n.element.extra.icon!==""?(P(),w("span",ha)):T("",!0)],4),n.element.extra.subText&&n.element.extra.subText.value?(P(),w("span",{key:0,style:ue(g.value?"visibility: hidden;":""),class:"sub-heading-group text-xs font-sans"},[R("span",Pa,q(E(X)),1)],4)):T("",!0)],10,fa)):T("",!0),oe.value?(P(),w("section",ba,[ce(i,{onExpired:t[1]||(t[1]=()=>F.value=""),onVerify:St}),se.value?(P(),w("p",Sa,q(se.value),1)):T("",!0)])):T("",!0),ye.value?T("",!0):Qe((P(),w("button",{key:2,disabled:g.value||E(B)&&N.value,"data-animation-class":E(h),id:`${n.element.id}_btn`,style:ue(g.value||E(B)&&N.value?"cursor: default;":""),class:Ye([n.classStyles]),onClick:wt,"aria-label":We()},[R("div",{style:ue(g.value||E(B)&&N.value?"visibility: hidden;":""),class:"main-heading-group"},[n.element.extra.icon!==""?(P(),w("div",wa)):T("",!0),R("div",Ea,q(E(Z)),1),n.element.extra.icon!==""?(P(),w("div",Oa)):T("",!0)],4),n.element.extra.subText&&n.element.extra.subText.value?(P(),w("div",{key:0,style:ue(g.value||E(B)&&N.value?"visibility: hidden;":""),class:"text-xs font-sans"},[R("div",Ta,q(E(X)),1)],4)):T("",!0),Qe(R("div",ka,[ce(aa,{loading:g.value||E(B)&&N.value,color:"rgb(255, 255, 255)",size:"30px"},null,8,["loading"])],512),[[et,g.value||E(B)&&N.value]])],14,Ia)),[[et,!Oe.value]]),R("div",null,[$e.value&&E(r).funnelPageId&&E(B)?(P(),w("section",xa,[R("div",{id:`${n.element.id}-payment-form`,class:"payment-form"},[ce(u,{id:`${n.element.id}-payment-element`,ref_key:"confirmPaymentRef",ref:Be,customProviderProps:Y.value,onPaymentCallback:Pt},null,8,["id","customProviderProps"]),H.value?(P(),w("div",Ra,[R("img",{src:E(ea),alt:"alert"},null,8,Ca),Mt(" "+q(H.value),1)])):T("",!0)],8,La)])):T("",!0)]),Oe.value&&V.value?(P(),w("div",Na,[E(ht)?(P(),tt(c,{key:0,initiatePaypalPayment:Le,onApprovePaypalPayment:Re,onCancelPaypalPayment:Ce,paypalErrorMsg:z.value,processingPayment:b.value,currency:V.value},null,8,["paypalErrorMsg","processingPayment","currency"])):(P(),w("div",Ma,[ce(s,{initiatePaypalPayment:Le,onApprovePaypalPayment:Re,onCancelPaypalPayment:Ce,processingPayment:b.value,currency:V.value},null,8,["processingPayment","currency"]),ce(o,{initiatePaypalPayment:Le,onApprovePaypalPayment:Re,onCancelPaypalPayment:Ce,paypalErrorMsg:z.value,processingPayment:b.value,currency:V.value},null,8,["paypalErrorMsg","processingPayment","currency"])]))])):T("",!0),S.value?(P(),w("div",Aa,q(S.value),1)):T("",!0),ke.value?(P(),tt(d,{key:5,extra:a.element.extra,stripeOptions:$.value,order:v.value,traceId:v.value.traceId,element:a.element,styles:n.classStyles,onClosePaymentElementModal:kt},null,8,["extra","stripeOptions","order","traceId","element","styles"])):T("",!0)],64)}}});export{er as default};
